---
title: "R Notebook"
output: html_notebook
---

This is a [R Notebook](http://rmarkdown.rstudio.com) for the "Introducton to R and R Studio" UMN Data Management Bootcamp workshop. Slides and data can be found [here](http://z.umn.edu/rtutorial). 

## Lesson Objectives for this file
		- Getting data into R as a CSV file
		- Exploring your data
		- Getting summary statistics
		- Plotting Your Data
		- Get data out of R as a CSV file
  
## Aside: Why use an RNotebook?

R Notebooks let you run R code and display the results interactively while also sharing the results as an html file that anyone can read. We will be using this R Notebook to display code and examples. All the commands seen in the following snippits can be run in Rstudio, the R console, or in a .R file

For example the following displays a simple scatterplot for the data in the built-in dataset "cars" (which contains data about cars!) for the variable "mpg" 

```{r}
plot(mtcars$mpg)
```

# Notes before we get started
- What Happens in R Stays In R (Until You Get It Out)
- Put every project in it's own directory
- Using RStudio "Projects" is a convient way to keep things together

---

# Initial setup

## Set up a new project

Using "File --> New Project" set up a new project in a new directory on your computer. This is where we will save our work (remember where this is so we can move data to it later). 

## Create a new R Script

Open a new R Script file (File --> New File --> R Script) and save it in your working directory with a .R extention

## Set your working directory to the directory you just created. 
This lets R know where it should look for and save files

This can be done by using the RStudio toolbar  (Session --> Set Working Directory). Copy and paste the line that appears in your console to your script so it's easy to run next time

```{r}
setwd("~/projects/TeachingRIntro50Minutes")
```


## Install any libraries you will need

This only needs to be done once for each package for each install of R. This can take a lot of time if the package is large or has a lot of dependencies. In this case, let's start by installing the ggplot2 package. 

```{r}
install.packages("ggplot2")
```


## Load Libraries into memory. 
This needs to be done each for each R session. 

```{r}
library(ggplot2)
```

---

# Getting data into R

There a number of different ways to get data into R. 

## Manually assigning variables

First, let's just assign some data, both numbers and text, to a couple different variables. 

ASIDE: R has a lot of different data structures and types that you will learn as you explore R and as you need to do different things with R.

```{r}
x <- 5
x
y <- "Rstats"
y
z <- c("rstats", "perl", "bash", "python")
z
```


## Built-in dataset that comes with R 
R comes with a number or built-in datasets that are good for eploring R and R Studio. We can load them directly and also assign them to variable names.


```{r}
mtcars
cardata <- mtcars
cardata
```

# Loading our own dataset (from .csv files) into R
the read.csv function will load a csv file into RStudio. It has a number of options. 

```{r}
data <- read.csv("mpls_energy_benchmarking_2015.csv", header=TRUE, na.strings=c("N/A", "Not Available", "NA", "0"))

```

You can also download data directly from R, in this case from figshare: 

```{r}
download.file("https://ndownloader.figshare.com/files/2292169", "portal_data_joined.csv")
```

---

# Exploring your data

## Look at the first couple rows of your data
```{r}
head(data)
```

## See the structure of your data

```{r}
str(data)
```


## See the number of rows and columns in your data

```{r}
nrow(data)
ncol(data)
```


## Getting help inside R for any of the above commands

```{r}
?str
?read.csv
```

---

# Basic summary statistics

```{r}
summary(data$energy_star_score)
```

---

# Plotting your data

We can use the built in plotting libraries that comes with base R to plot our data in various ways. 

```{r}
plot(data$floor_area)
```

```{r}
boxplot(data$energy_star_score)
```

```{r}
boxplot(data$energy_star_score ~ data$org_name)
```

```{r}
hist(data$energy_star_score)
```

---

# Getting data out of R

# Export a dataset to a CSV file

```{r}
write.csv(data, "data.csv")
```

